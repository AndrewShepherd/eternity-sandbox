<UserControl x:Class="Eternity.WpfApp.BoardDisplay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Eternity.WpfApp"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
	>
	<UserControl.Resources>
    	<local:BoardDisplayViewModel x:Key="BoardDisplayViewModel" />
	</UserControl.Resources>
	<ItemsControl 
		DataContext="{StaticResource BoardDisplayViewModel}"	
		ItemsSource="{Binding CanvasItems}" 
	>
		<ItemsControl.ItemsPanel>
			<ItemsPanelTemplate>
				<Canvas IsItemsHost="True" />
			</ItemsPanelTemplate>
		</ItemsControl.ItemsPanel>
		<ItemsControl.Resources>
			<DataTemplate DataType="{x:Type local:CanvasPieceItem}">
				<Image 
					Source="{Binding ImageSource}" 
					RenderTransformOrigin="0.5, 0.5"
					Width="{Binding Width}"
					Height="{Binding Height}"
					HorizontalAlignment="Stretch"
					VerticalAlignment="Stretch"
				>
					<Image.RenderTransform>
						<RotateTransform Angle="{Binding Rotation}" />
					</Image.RenderTransform>
				</Image>
			</DataTemplate>
			<DataTemplate DataType="{x:Type local:CanvasHighlightItem}">
				<Rectangle
						Width="{Binding Width}"
						Height="{Binding Height}"
						Stroke="Yellow"
						StrokeThickness="4"
						/>
			</DataTemplate>
			<DataTemplate DataType="{x:Type local:CanvasConstraintItem}">
				<Border Width="{Binding Width}" Height="{Binding Height}" Padding="6,6,6,6">
					<Viewbox>
						<TextBlock Text="{Binding Count}" />
					</Viewbox>
				</Border>
			</DataTemplate>
		</ItemsControl.Resources>
		<ItemsControl.ItemContainerStyle>
			<Style TargetType="ContentPresenter">
				<Setter Property="Canvas.Left" Value="{Binding Left}" />
				<Setter Property="Canvas.Top" Value="{Binding Top}" />
			</Style>
		</ItemsControl.ItemContainerStyle>
	</ItemsControl>

</UserControl>
